import{p as A,i as I,q as E,s as T,k,o as i,w as t,a,b as d,f as q,d as l,c as _,g as H,F as g,t as u,x as L}from"./app-5TOWMTuP.js";import{_ as $}from"./AuthenticatedLayout-CBaMwfcV.js";import{d as G}from"./dayjs.min-BEZ1BskM.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as K,B as Q}from"./index-DqExWMqt.js";import{C as W}from"./index-UAea1zhP.js";import{F as X,_ as Z}from"./index-D4oznQ0Z.js";import{I as ee}from"./index-DqbpODE0.js";import{S as te,a as ae}from"./Checkbox-B74wNlrN.js";import{_ as oe}from"./index-CKk4TFhy.js";import{T as ne}from"./index-CghWTTxU.js";import{_ as se}from"./index-sJYcqMWv.js";import"./index-C49kuiz5.js";import"./move-HXDSRObx.js";import"./index-BHZWcIq_.js";import"./index-B6WnRDXT.js";import"./useBreakpoint-D6coKbvK.js";const le={class:"text-muted"},re={class:"text-muted"},ie={class:"text-muted"},ue=["title"],de={class:"mt-2",style:{display:"flex","justify-content":"flex-end"}},pe={__name:"AdminIndex",props:{solicitudes:{type:Object,required:!0},rubros:{type:Array,default:()=>[]},filters:{type:Object,default:()=>({})}},setup(j){A();const p=j,m=I(()=>p.solicitudes),y=E(!1),z=I(()=>p.rubros.map(o=>({value:o.id,label:o.nombre}))),n=T({buscar:p.filters.buscar||"",rubro_id:p.filters.rubro_id||void 0,desea:p.filters.desea||void 0,perPage:p.filters.perPage||10}),D=[{title:"Empresa / RUC",key:"empresa",dataIndex:"empresa",width:240},{title:"Contacto",key:"contacto",dataIndex:"nombre_contacto",width:240},{title:"Rubro",key:"rubro",dataIndex:["rubro","nombre"],width:160},{title:"Desea",key:"desea",dataIndex:"desea",width:110},{title:"Mensaje",key:"mensaje",dataIndex:"mensaje",ellipsis:!0},{title:"Fecha",key:"fecha",dataIndex:"created_at",width:150}],F=o=>o?G(o).format("YYYY-MM-DD HH:mm"):"",B=(o,e)=>o?o.length>e?o.slice(0,e)+"…":o:"—",v=(o={})=>{y.value=!0,L.get(route("solicitudes.index"),{...n,page:o.page??m.value.current_page,perPage:o.perPage??n.perPage},{preserveScroll:!0,preserveState:!0,replace:!0,onFinish:()=>{y.value=!1}})},x=()=>v({page:1}),h=()=>{n.buscar="",n.rubro_id=void 0,n.desea=void 0,n.perPage=10,v({page:1,perPage:10})},U=o=>v({page:o}),N=(o,e)=>{n.perPage=e,v({page:1,perPage:e})};return(o,e)=>{const O=ee,c=Z,b=te,f=ae,w=Q,C=K,M=X,S=ne,R=oe,V=se,Y=W;return i(),k($,null,{default:t(()=>[a(C,{direction:"vertical",style:{width:"100%"}},{default:t(()=>[a(Y,{title:"Solicitudes de contacto"},{default:t(()=>[a(M,{layout:"inline",onSubmit:q(x,["prevent"])},{default:t(()=>[a(c,{label:"Buscar"},{default:t(()=>[a(O,{value:n.buscar,"onUpdate:value":e[0]||(e[0]=s=>n.buscar=s),"allow-clear":"",placeholder:"Empresa, nombre, email, RUC...",style:{"min-width":"260px"}},null,8,["value"])]),_:1}),a(c,{label:"Rubro"},{default:t(()=>[a(b,{value:n.rubro_id,"onUpdate:value":e[1]||(e[1]=s=>n.rubro_id=s),"allow-clear":"",style:{"min-width":"200px"},options:z.value},null,8,["value","options"])]),_:1}),a(c,{label:"Desea"},{default:t(()=>[a(b,{value:n.desea,"onUpdate:value":e[2]||(e[2]=s=>n.desea=s),"allow-clear":"",style:{"min-width":"160px"}},{default:t(()=>[a(f,{value:"cotizacion"},{default:t(()=>e[4]||(e[4]=[l("Cotización",-1)])),_:1,__:[4]}),a(f,{value:"demo"},{default:t(()=>e[5]||(e[5]=[l("Demo",-1)])),_:1,__:[5]})]),_:1},8,["value"])]),_:1}),a(c,{label:"Por página"},{default:t(()=>[a(b,{value:n.perPage,"onUpdate:value":e[3]||(e[3]=s=>n.perPage=s),style:{"min-width":"110px"}},{default:t(()=>[a(f,{value:10},{default:t(()=>e[6]||(e[6]=[l("10",-1)])),_:1,__:[6]}),a(f,{value:25},{default:t(()=>e[7]||(e[7]=[l("25",-1)])),_:1,__:[7]}),a(f,{value:50},{default:t(()=>e[8]||(e[8]=[l("50",-1)])),_:1,__:[8]})]),_:1},8,["value"])]),_:1}),a(c,null,{default:t(()=>[a(C,null,{default:t(()=>[a(w,{type:"primary",onClick:x},{default:t(()=>e[9]||(e[9]=[l("Filtrar",-1)])),_:1,__:[9]}),a(w,{onClick:h},{default:t(()=>e[10]||(e[10]=[l("Limpiar",-1)])),_:1,__:[10]})]),_:1})]),_:1})]),_:1}),a(R,{class:"mt-3","data-source":m.value.data,columns:D,loading:y.value,pagination:!1,"row-key":"id",scroll:{x:1e3}},{bodyCell:t(({column:s,record:r})=>{var P;return[s.key==="empresa"?(i(),_(g,{key:0},[d("div",null,[d("strong",null,u(r.empresa),1)]),d("div",le,u(r.ruc||"—"),1)],64)):s.key==="contacto"?(i(),_(g,{key:1},[d("div",null,u(r.nombre_contacto),1),d("div",re,u(r.email_contacto),1),d("div",ie,u(r.telefono_contacto||"—"),1)],64)):s.key==="rubro"?(i(),_(g,{key:2},[l(u(((P=r.rubro)==null?void 0:P.nombre)||"—"),1)],64)):s.key==="desea"?(i(),_(g,{key:3},[r.desea==="cotizacion"?(i(),k(S,{key:0},{default:t(()=>e[11]||(e[11]=[l("Cotización",-1)])),_:1,__:[11]})):(i(),k(S,{key:1},{default:t(()=>e[12]||(e[12]=[l("Demo",-1)])),_:1,__:[12]}))],64)):s.key==="mensaje"?(i(),_("span",{key:4,title:r.mensaje},u(B(r.mensaje,80)),9,ue)):s.key==="fecha"?(i(),_(g,{key:5},[l(u(F(r.created_at)),1)],64)):H("",!0)]}),_:1},8,["data-source","loading"]),d("div",de,[a(V,{current:m.value.current_page,pageSize:m.value.per_page,total:m.value.total,onChange:U,onShowSizeChange:N,pageSizeOptions:["10","25","50"],"show-size-changer":"","show-total":""},null,8,["current","pageSize","total"])])]),_:1})]),_:1})]),_:1})}}},De=J(pe,[["__scopeId","data-v-e8398450"]]);export{De as default};
